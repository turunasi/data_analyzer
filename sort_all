#!/bin/bash
echo -e "データロガーで取得したレコードを分割します"
echo "レコード総数を入力 :"
read NUM
echo "イニシャルデータの番号を入力(空白区切り):"
declare -a INIT_NUM
read -a INIT_NUM
echo "データが入っているフォルダのパスを入力 :"
read IN_PATH
echo "出力先のフォルダのパスを入力 :"
read OUT_PATH
echo -e "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo -e "\t総数       : ${NUM}"
echo -e "\tイニシャル  : ${INIT_NUM[*]}"
echo -e "\t入力先     : ${IN_PATH}"
echo -e "\t出力先     : ${OUT_PATH}"
echo -e "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo "以上でよろしいですか？ [y/N] : "
read answer
if [ "${answer}" != "y" ]; then
  printf "\033[31m%s\033[m\n" "中止します..."
  exit 1
fi
for i in $(seq 1 $NUM)
do
    init_flg=0
    for j in "${INIT_NUM[@]}"
    do
        if [ $i = $j ]; then
            init_flg=1
            break
        fi
    done
    ./sort $i $init_flg $IN_PATH $OUT_PATH
    echo -e ""
done
printf '\033[33m%s\033[m\n' '全レコードの分割に成功しました！'